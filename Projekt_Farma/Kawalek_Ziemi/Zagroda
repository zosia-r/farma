package Kawalek_Ziemi;

import Obserwator.Obserwator;
import Wyjatek.*;
import zwierzeta.*;

public class Zagroda extends Kawalek_Ziemi implements Rzeznik {
	
	private Zwierze zwierze;
	
	
	public Zagroda(int x, int y, Zwierze zwierze)
	{
		super(x, y);
		zwierze = null;
	}
	
	public void KupZwierze(Zwierze zwierze) throws FieldNotEmptyException
    {
        if (this.zwierze != null)
            throw new FieldNotEmptyException();
        this.zwierze = zwierze;
        System.out.println("Kupiono zwierze do tej zagrody");

    }
	
	public void sprobujKupicZwierze(Zwierze zwierze)
    {
        try
        {
            KupZwierze(zwierze);
        }
        catch (FieldNotEmptyException e)
        {
            System.err.println(e.getMessage() + this.zwierze.getNazwa());
        }
    }
	
	public void usunZwierze()
	{
		zwierze = null;
	}
	
	@Override
	public void zabijSwinie()
	{
		zwierze = null;
	}
	
	public void nakarm()
	{
		zwierze.setGlodne(false);
	}
	
	public void zbierzProdukt()
	{
		if(zwierze.getProduktyZ().isEmpty()==false)
        {
			for(int i=0; i<zwierze.getProduktyZ().size(); i++)
	        {
				zwierze.getProduktyZ().get(i).zbierz();
	        }
			zwierze.getProduktyZ().clear();
        }
	    else
	    {
	        System.out.println("W tej zagrodzie nie ma produktow do zebrania.");
	    }
	            }
	
	public void powiadomObserwatorow()
    {
        for(int i=0;i<getObserwatorzy().size();i++)
        {
            Obserwator obs = (Obserwator) getObserwatorzy().get(i);
            obs.aktualizacja(zwierze.getNazwa(),zwierze.getGlodne(),zwierze.getIkonka(), zwierze.getProduktyZ().size());
        }
    }
}
